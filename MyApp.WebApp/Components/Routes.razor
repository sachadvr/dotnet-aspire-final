@using Microsoft.AspNetCore.Components.Authorization

<Router AppAssembly="typeof(Program).Assembly">
    <Found Context="routeData">
        <AuthorizeRouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)">
            <NotAuthorized Context="authContext">
                @if (authContext.User.Identity?.IsAuthenticated != true)
                {
                    <RedirectToLogin />
                }
                else
                {
                    <div class="container mt-5">
                        <h1>Accès refusé</h1>
                        <p>Vous n'avez pas les permissions nécessaires pour accéder à cette page.</p>
                        <a href="/Account/AccessDenied" class="btn btn-primary">En savoir plus</a>
                    </div>
                }
            </NotAuthorized>
            <Authorizing>
                <div class="text-center p-4">
                    <p>Chargement...</p>
                </div>
            </Authorizing>
        </AuthorizeRouteView>
        <FocusOnNavigate RouteData="routeData" Selector="h1" />
    </Found>
    <NotFound>
        <PageTitle>Page non trouvée</PageTitle>
        <LayoutView Layout="typeof(Layout.MainLayout)">
            <div class="container mt-5">
                <h1>Page non trouvée</h1>
                <p>Désolé, la page que vous recherchez n'existe pas.</p>
                <a href="/" class="btn btn-primary">Retour à l'accueil</a>
            </div>
        </LayoutView>
    </NotFound>
</Router>
